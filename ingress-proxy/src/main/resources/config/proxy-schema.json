{
  "$schema" : "http://json-schema.org/draft-07/schema#",
  "type" : "object",
  "required" : [ "enabled", "http2Enabled", "hosts", "connectionsPerThread", "maxRequestTime", "rewriteHostHeader", "reuseXForwarded", "maxConnectionRetries", "maxQueueSize", "forwardJwtClaims", "metricsInjection", "metricsName" ],
  "properties" : {
    "enabled" : {
      "type" : "boolean",
      "description" : "Indicate if the proxy handler is enabled or not.",
      "default" : true
    },
    "http2Enabled" : {
      "type" : "boolean",
      "description" : "If HTTP 2.0 protocol will be used to connect to target servers. Only if all host are using https\nand support the HTTP2 can set this one to true.\n",
      "default" : false
    },
    "hosts" : {
      "type" : "string",
      "description" : "Target URIs. Use comma separated string for multiple hosts. You can have mix http and https and\nthey will be load balanced. If the host start with https://, then TLS context will be created.\n",
      "default" : "http://localhost:8080"
    },
    "connectionsPerThread" : {
      "type" : "integer",
      "description" : "Connections per thread to the target servers.",
      "default" : 20,
      "format" : "int32"
    },
    "maxRequestTime" : {
      "type" : "integer",
      "description" : "Max request time in milliseconds before timeout.",
      "default" : 1000,
      "format" : "int32"
    },
    "rewriteHostHeader" : {
      "type" : "boolean",
      "description" : "Rewrite Host Header with the target host and port and write X_FORWARDED_HOST with original host.",
      "default" : true
    },
    "reuseXForwarded" : {
      "type" : "boolean",
      "description" : "Reuse XForwarded for the target XForwarded header.",
      "default" : false
    },
    "maxConnectionRetries" : {
      "type" : "integer",
      "description" : "Max Connection Retries.",
      "default" : 3,
      "format" : "int32"
    },
    "maxQueueSize" : {
      "type" : "integer",
      "description" : "The max queue size for the requests if there is no connection to the downstream API in the connection pool.\nThe default value is 0 that means there is queued requests. As we have maxConnectionRetries, there is no\nneed to use the request queue to increase the memory usage. It should only be used when you see 503 errors\nin the log after maxConnectionRetries to accommodate slow backend API.\n",
      "default" : 0,
      "format" : "int32"
    },
    "forwardJwtClaims" : {
      "type" : "boolean",
      "description" : "Decode the JWT token claims and forward to the backend api in the form of json string.",
      "default" : false
    },
    "metricsInjection" : {
      "type" : "boolean",
      "description" : "When LightProxyHandler is used in the http-sidecar or light-gateway, it can collect the metrics info for the\ntotal response time of the downstream API. With this value injected, users can quickly determine how much\ntime the http-sidecar or light-gateway handlers spend and how much time the downstream API spends, including\nthe network latency. By default, it is false, and metrics will not be collected and injected into the metrics\nhandler configured in the request/response chain.\n",
      "default" : false
    },
    "metricsName" : {
      "type" : "string",
      "description" : "When the metrics info is injected into the metrics handler, we need to pass a metric name to it so that the\nmetrics info can be categorized in a tree structure under the name. By default, it is proxy-response, and\nusers can change it.\n",
      "default" : "proxy-response"
    }
  }
}
